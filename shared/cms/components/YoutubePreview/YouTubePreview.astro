---
import { LinkExternal } from '@shared/links/LinkExternal'
import PlayIcon from 'astro-heroicons/solid/Play.astro'
import { Picture } from 'astro:assets'
import { clsx } from 'clsx'
import { getImage } from '../utils/getImage'

const { link, previewImage } = Astro.props

const image = getImage(previewImage)
---

<LinkExternal
  href={link}
  className={clsx(
    'group relative flex aspect-video w-full items-center justify-center overflow-clip rounded-md',
    'my-8',
  )}
>
  <div
    class="flex h-20 w-20 items-center justify-center rounded-full bg-white/70 shadow-sm backdrop-blur-md transition-all duration-300 group-hover:h-24 group-hover:w-24"
  >
    <PlayIcon class="ml-2 h-14 w-14 transition-all group-hover:h-20 group-hover:w-20" />
  </div>
  <picture class="absolute inset-0 -z-10">
    <Picture
      src={image}
      alt=""
      class="mb-0! w-full"
      pictureAttributes={{ class: 'not-prose w-full' }}
      width={960}
      densities={[1.5, 2]}
      formats={['jpg', 'avif']}
    />
  </picture>
</LinkExternal>
